from app import create_app
from app.extensions import db
from flask import render_template, session, redirect, url_for

app, celery = create_app()

app.app_context().push()


@app.route("/", methods=["GET"])
def index():
    if "user_id" not in session:
        return redirect(url_for('auth.login'))
    return render_template("index.html")


if __name__ == "__main__":
    with app.app_context():
        db.create_all()  # Create database tables for our data models
    app.run(debug=True, host="0.0.0.0")
