from app import create_app
from app.extensions import db
import subprocess


app, celery = create_app()

app.app_context().push()

if __name__ == "__main__":
    with app.app_context():
        db.create_all()  # Create database tables for our data models
        '''
        subprocess.Popen([ # Automatically runs celery worker for the async scan
            'python3', 
            '-m', 
            'celery',
            '-A',
            'run.celery', 
            'worker'
        ])
        '''
    app.run(debug=True, host="0.0.0.0")
